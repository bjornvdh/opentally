<!DOCTYPE html>
<html lang="en-gb" dir="ltr">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>OpenTally - Gateway configuration</title>
        <link rel="stylesheet" href="../css/uikit.min.css">
    </head>

    <body>
		<!--HEADER-->
		<header>
			<div class="uk-container">
				<nav class="uk-navbar-transparent" data-uk-navbar>
					<div class="uk-navbar-left">
						<a class="uk-navbar-item uk-logo" href="/">OpenTally Gateway</a>
					</div>
					<div class="uk-navbar-center uk-visible@m">
						<ul class="uk-navbar-nav">
							<li class=""><a href="#">Home</a></li>
                            <li class="uk-active"><a href="#">Buttons</a></li>
                            <li class=""><a href="#">RGB LEDs</a></li>
                            <li class=""><a href="#">Control</a></li>
						</ul>
					</div>
					<div class="uk-navbar-right">
						<ul class="uk-navbar-nav">
							<li>
								<a href="#" data-uk-icon="icon:user"></a>
								<div class="uk-navbar-dropdown uk-navbar-dropdown-bottom-left">
									<ul class="uk-nav uk-navbar-dropdown-nav">
										<li class="uk-nav-header uk-text-small uk-text-primary">YOUR ACCOUNT</li>
										<li><a href="#"><span data-uk-icon="icon: info"></span> Summary</a></li>
										<li><a href="#"><span data-uk-icon="icon: refresh"></span> Edit</a></li>
										<li><a href="#"><span data-uk-icon="icon: settings"></span> Configuration</a></li>
										<li class="uk-nav-divider"></li>
										<li><a href="#"><span data-uk-icon="icon: image"></span> Your Pictures</a></li>
										<li class="uk-nav-divider"></li>
										<li><a href="#"><span data-uk-icon="icon: sign-out"></span> Logout</a></li>
										
									</ul>
								</div>
							</li>
							<li class="uk-hidden@m"><a class="uk-navbar-toggle" data-uk-toggle data-uk-navbar-toggle-icon href="#offcanvas-nav"></a></li>
						</ul>
					</div>
				</nav>
			</div>
		</header>

        <!-- INFO -->
        <section class="uk-section uk-section-default uk-box-shadow-small uk-section-xsmall">
            <div class="uk-container">
                <div class="uk-grid uk-grid-small uk-flex uk-flex-middle" data-uk-grid>
                    <div class="uk-width-expand">
                        <h1 class="uk-margin-remove">Buttons.</h1>
                        <p>Here you see all the buttons that are on the OpenTally Gateway. 
                            Click a button to configure what happens when you press or long-press the button.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- /INFO -->

        <!-- CONTENT -->
        <section class="uk-section uk-section-muted">
			<div class="uk-container"> 
                <div class="uk-grid-small uk-child-width-expand@s uk-text-center uk-grid-divider" uk-grid>                    
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_16"></div>
                    </div>            
                </div>  
                <hr> 
                <div class="uk-grid-small uk-child-width-expand@s uk-text-center uk-grid-divider " uk-grid>                    
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_17"></div>
                    </div>
                </div>
                <hr>
                <div class="uk-grid-small uk-child-width-expand@s uk-text-center uk-grid-divider" uk-grid>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_0"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_1"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_2"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_3"></div>
                    </div>            
                </div>
                <hr>
                <div class="uk-grid-small uk-child-width-expand@s uk-text-center uk-grid-divider" uk-grid>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_4"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_5"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_6"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_7"></div>
                    </div>            
                </div>
                <hr>
                <div class="uk-grid-small uk-child-width-expand@s uk-text-center uk-grid-divider" uk-grid>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_8"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_9"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_10"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_11"></div>
                    </div>            
                </div>     
                <hr>
                <div class="uk-grid-small uk-child-width-expand@s uk-text-center uk-grid-divider" uk-grid>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_12"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_13"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_14"></div>
                    </div>
                    <div>
                        <div class="uk-card uk-card-default uk-text-left uk-card-small uk-card-body" id="btn_15"></div>
                    </div>            
                </div>                                           
            </div>
        </section>
        <!-- /CONTENT -->

        <script src="../js/uikit.min.js"></script>
        <script src="../js/uikit-icons.min.js"></script>
        <script src="../js/opentally.js"></script>
        <script>
            var actions = [
                "No action",
                "Select channel",
                "Send sound",
                "Send message",
                "Set preview",
                "Set program",
                "Set on air state",
                "Switch off / sleep",
                "Set client channel"
            ];

            function showConfig(keyCfg)
            {
                for(var iBtn in keyCfg)
                {
                    var btnHtml = "<h4>"+(iBtn)+"</h4>";
                    var action = (keyCfg[iBtn].p?.a) ? keyCfg[iBtn].p?.a : 0;
                    btnHtml += "Press: "+(actions[action])+"<br>";
                    action = (keyCfg[iBtn].lp?.a) ? keyCfg[iBtn].lp?.a : 0;
                    btnHtml += "Long press: "+(actions[action])+"";
                    document.getElementById("btn_"+iBtn).innerHTML = btnHtml;
                }
            }

            document.onreadystatechange = () => {
                if (document.readyState === 'complete') {
                    GetJSON("/api/keycfg", showConfig);

    //                 showConfig( [
    //     {"p": {"a": 1, "p1": 5, "p2": 2}},
    //     {"p": {"a": 1, "p1": 6, "p2": 2}},
    //     {"p": {"a": 1, "p1": 7, "p2": 2}},
    //     {"p": {"a": 1, "p1": 8, "p2": 2}, "lp": {"a": 6, "p1": 3}},
    //     {"p": {"a": 2, "p1": 0, "p2": 0}},
    //     {"p": {"a": 2, "p1": 0, "p2": 1}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Focus"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Ander shot"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "<- Zang"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Zang midden"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Zang ->"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Spreker"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Drums"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Piano"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Gitaar"}},
    //     {"p": {"a": 3, "p1": 0, "p2": "Bas / instr"}},        
    //     {"lp": {"a": 7}},
    //     {}
    // ]);
                }
            };
        
        </script>
    </body>
</html>
